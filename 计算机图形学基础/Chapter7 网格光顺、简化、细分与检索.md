## 一、网格光滑
Laplacian 光滑
迭代：
$$
p_i^{(t+1)} \leftarrow p_i^{(t)}+\lambda\Delta p_i^{t}
$$
其中λ为步长。

二维：
$$
\Delta p_i^{t}=\frac{1}{2}(p_{i+1}+p_{i-1})-p_i
$$
三维：
$$
\Delta p_i^{t}=\frac{1}{|N_i|}(\sum_{j\in N_i}p_j)-p_i
$$

缺点：迭代次数过多，导致网格变小。

## 二、简化
1. 采样：通过选取模型表面的点简单地对模型进行几何取样。
2. 自适应细分：通过寻找一个可以递归细分的基底网格来近似最初的模型。
3. 去除：迭代移除网格上的顶点或面片，并三角化每步移除后留下的孔洞。
4. 顶点合并：将断裂三角形化模型的两个或更多顶点合并为一个顶点。

## 三、网格细分
### 1. 细分过程
1. 细化阶段：创建新顶点并与先前顶点相连，产生新的、更小的三角形。
2. 平滑阶段：计算新顶点的位置。

细分准则：
一个已存在的顶点p^k，k是当前已经进行细分的步数，则细分过程表示为
$$
p^0 \rightarrow p^1 \rightarrow p^2 \rightarrow ...
$$
如果p^k的度为n，则p^k有n个相邻顶点，记为
$$
p_i^k, \,i\in\{0,1,2,...n-1\}
$$

### 2. Loop细分
思路：将每个三角形分成4个三角形。在每条边加一个新顶点，连接新顶点。

新增顶点
$$
p_i^{k+1}= \frac{3p^k+3p_i^k+p_{i-1}^k+p_{i+1}^k}{8},\,i=0,...n-1
$$
更新原有的点
$$
p^{k+1}=(1-n\beta)p^k+\beta(p_0^k+...+p_{n-1}^k)
$$
β是n的函数
$$
\beta = \frac{1}{n} (\frac{5}{8}-(\frac{3}{8}+\frac{1}{4}cos\frac{2\pi}{n})^2)
$$

### 3. √3细分
思路：将每个三角形分成3个三角形。在每个三角形中间创建一个新顶点，与原有三个顶点相连。

新增顶点
$$
p_m^{k+1}=(p_a^k+p_b^k+p_c^k)/3
$$
更新原有的点
$$
p^{k+1} = (1-n\beta)p^k + \beta \sum_{i=0}^{n-1}p_i^k
$$
β是n的函数
$$
\beta = \frac{4-2cos(2\pi/n)}{9n}
$$

## 四、网格简化
### 1. 三种不同的基本化简操作
1. 顶点删除操作
2. 边压缩操作
3. 面片收缩操作

### 2. 基于长方体滤波的多面体简化
1. 建立长方体包围盒
2. 将包围盒空间均匀分成一系列小长方体子空间
3. 同一小长方体内的顶点合并成一个顶点

### 3. 顶点删除技术
##### 思路
从原始模型顶点集中删除一些不重要的顶点，同时从其面片中删除与这些顶点相连的所有面皮，再对空洞进行局部三角剖分。

##### 问题
删除哪些顶点？
局部判别准则：基于相邻面片和边界的局部平坦性原则

##### 对于网格内部顶点
记其周围相邻面片集为S，则该点的平坦性标准：
$$
d = |N\cdot (v-C)|
$$
其中N为如下向量的单位向量，代表加权单位法向
$$
\frac{\sum_{f\in S}n(f)A(f)}{\sum_{f\in S}A(f)}
$$
C代表加权中心点
$$
\frac{\sum_{f\in S}c(f)A(f)}{\sum_{f\in S}A(f)}
$$
A(f)：三角面片面积  c(f)：三角面片中心  n(f)：三角面片法向

##### 对边界顶点
记与它相邻的两个边界顶点为v1, v2，则其平坦性标准定义为v到v1与v2连线的距离

### 4. 渐进的网格简化技术
显式能量函数E(M)：度量简化网格与原始网格的逼近度
$$
E(M)=E_{dist}(M)+E_{spring}(M)+E_{scalar}(M)+E_{disc}(M)
$$
1. $E_{dist(M)}$：M的距离能量，定义为点击x={x1,...xn}到网格M的距离的平方
2. $E_{spring(M)}$：M的弹性能量，相当于在M的每条边放置一根弹簧，边长尽量不发生很大变化
3. $E_{scalar(M)}$：度量M的标量属性的精度
4. $E_{disc(M)}$：度量视觉不连续的特征线的几何精度

利用边收缩变换来逐步迭代计算上述能量的优化过程，边收缩是可逆的。

### 5. 基于二次误差度量的简化技术
每一个顶点va有许多三角面片与之相邻，这些三角面片的平面方程的集合为：
$$
plane(v_a)=\{(a,b,c,d)|ax+by+cz+d=0,\,(a^2+b^2+c^2=1)\}
$$
度量va移动到v产生的误差，其中v为齐次坐标 (x,y,z,1)
$$
\Delta(v_a\rightarrow v)
=\sum_{p\in plane(v)} (pv^T)^2
=v (\sum_{p\in plane(v)} K_p) v^T
=v Q(v_a) v^T
$$
计算Q(va)即可度量误差。
但每次合并时需移动两点，对于(v1,v2)->v，其误差为
$$
\begin{aligned}
&\Delta(v)
=\Delta(v1\rightarrow v)+\Delta(v2\rightarrow v)
=v(Q(v1)+Q(v2))v^T
=vQv^T \\
&Q=Q(v1)+Q(v2)
\end{aligned}
$$
由极值的性质，v满足系统方程
$$
\frac{\partial\Delta(v)}{\partial x}
=\frac{\partial\Delta(v)}{\partial y}
=\frac{\partial\Delta(v)}{\partial z}
=0
$$
若上式有唯一解，则其解为v的最优解；否则，用伪逆技术求v。若伪逆技术失效，则从v1，v2或(v1+v2)/2中选一个作为v。

## 五、网格检索
### 1. Spin Image
<[Spin-Image - Ligo丶 - 博客园 (cnblogs.com)](https://www.cnblogs.com/Ligo-Z/p/16325186.html)>
对于一个点p，定义切平面。
对于另一个点x，可以计算α和β，如图所示。
![[assets/Pasted image 20221128210417.png]]
通过计算α和β，可以将其他所有三维点x映射到二维平面上，x->(α, β)
在每个(α, β)累积三维点的数目，即可得到点p的特征图
![[assets/Pasted image 20221128210908.png]]
Spin image的生成过程可视化：一个围绕定向点基旋转的薄片，在扫描空间时积累点。


### 2. 3D Shape Context
<[(21条消息) 点云处理学习笔记（六）-- 特征描述 2D/3D Shape Context_ParzivalEdison的博客-CSDN博客](https://blog.csdn.net/qq_45006390/article/details/118379570)>
1. 以点p为球心，建立一系列大小的同心球，进行分割。
2. 为了避免离P点太近的点类似于噪声的干扰（即采样点太近，造成噪声的干扰影响程度更大），因此需要设置一个最小半径。
3. 统计每块区域内点的数目，即可将点的分布转成直方图，称为点p的形状上下文。
![[assets/Pasted image 20221128223151.png]]

### 3. Light Field
1. 渲染不同角度下的模型图像
2. 最小所有相应二维图像之间的误差
3. 找到模型之间的最相似视角的对应

### 4. Shape Distributions
##### 选择shape function
1. 基于随机点
2. 角度，距离，面积，体积

特点
1. 具有旋转，平移，镜面不变性
2. 对噪声，裂缝，插入和删除操作鲁棒
3. 不具有可描述性

##### 比较shape distributions
1. 规模标准化：避免模型尺寸的影响
2. 比较形状分布：推土机距离