## 3.1 词法分析器的作用
词法分析器的主要任务：读入源程序的输入字符、将它们组成词素，生成并输出一个词法单元序列，每个词法单元对应一个词素。
词法分析器通常还要和符号表交互。

其他任务：
1. 过滤程序中的注释和空白
2. 将编译器生成的错误消息与源程序的位置联系起来

### 3.1.1 词法分析及语法分析

### 3.1.2 词法单元、模式和词素
- 词法单元：词法单元名+可选的属性值
- 模式：描述了一个词法单元的词素可能具有的形式
- 词素：源程序中的一个字符序列，它和某个词法单元匹配

### 3.1.3 词法单元的属性
一般来说，和一个标识符有关的信息都保存在符号表。
因此一个标识符的属性值是一个指向符号表中该标识符对应条目的指针。

### 3.1.4 词法错误
假设出现所有词法单元的模式都无法和剩余输入的某个前缀相匹配的情况。
恐慌恢复：从剩余的输入中不断删除字符，直到词法分析器能够在剩余输入的开头发现一个正确的词法单元为止。

## 3.2 输入缓冲
### 3.2.1 缓冲区对
思路：利用两个交替读入的缓冲区
两个指针：
1. lexemeBegin：指向当前词素的开始处
2. forward：一直向前扫描直至发现词素尾端

每个缓冲区容量为N个字符，每次将N个字符读入缓冲区。
forward每次向前移动都要检查是否到达某个缓冲区尾端，如果到达，则要将新的N个字符读入另一个缓冲区。

### 3.2.2 哨兵标记
在每个缓冲区尾端放一个“哨兵”eof，将对缓冲区末端的测试和对当前字符的测试合二为一。
如果遇到eof，检查是否到达缓冲区末尾，如果是，则读入新的字符；否则就是找到了一个词素。
这样不用每次移动forward都检查是否到达缓冲区末尾，只用在遇到eof时检查。

