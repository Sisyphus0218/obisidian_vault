2020K8009929017 侯昱帆
（9分）

##### 11.1 
现有一块磁盘，扇区大小为512B，假设其平均寻道时间是5ms，旋转速率是15000 RPM（每分钟15000转），传输带宽是200MB/s，请计算：
1. 当程序分别读取256B，1KB，4KB，1MB的数据时，这四种情况下的有效带宽各是多少？
2. 如果希望软件读写该磁盘的有效带宽达到180MB/s，则软件的读写粒度应为多大？

**解答**
1. 平均旋转延迟为 0.5(60/15000)=0.002s=2ms
	读取256B，有效带宽 256B/(5ms+2ms+256B/200MB/s)=256B/7.00128ms=0.037MB/s
	读取1KB，有效带宽 1KB/(5ms+2ms+1KB/200MB/s)=1KB/7.005ms=0.14MB/s
	读取4KB，有效带宽 4KB/(5ms+2ms+4KB/200MB/s)=4KB/7.02ms=0.57MB/s
	读取1MB，有效带宽 1MB/(5ms+2ms+1MB/200MB/s)=1MB/12ms=83.33MB/s

2. 设读写粒度为 x MB
	180MB/s = xMB/(5ms+2ms+xMB/200MB/s) 
	解得 x=12.6MB
	故读写粒度为12.6MB

>读取数据块总时间=寻道时间+磁盘平均旋转延迟+数据传输时间
>磁盘平均旋转延迟=等待目标扇区旋转到磁头下方时间=转一圈需要的时间/2
>注意：磁盘传输的最小粒度是扇区

##### 11.2 
现有一块磁盘，假设其磁头当前位于第106磁道，正在向磁道序号增加的方向移动。现有一个磁盘访问请求序列，其访问的磁道号依次为33，55，10，68，110，180，170，205，请计算：
当分别采用FIFO、SSF和C-SCAN三种磁盘调度算法执行上述磁盘请求序列时，三种情况下的寻道距离各是多少？

**解答**
FIFO：106，33，55，10，68，110，180，170，205
寻道距离：73+22+45+58+42+70+10+35=355

SSF：106，110，68，55，33，10，170，180，205
寻道距离：4+42+13+22+23+160+10+25=299

C-SCAN：106，110，170，180，205，10，33，55，68
寻道距离：4+60+10+25+10+23+22+13=167

>（-1）
>C-SCAN错误
>注意：SCAN和C-SCAN算法中，扫描的首尾边界不是磁盘边界，而是请求边界。
>C-SCAN寻道距离：4+60+10+25+195+23+22+13=352

##### 11.3 
现有一个由5块磁盘组成的磁盘阵列，采用RAID-5模式，如下图所示。
![[Pasted image 20221201161529.png]]
该磁盘阵列每块盘的磁盘块（block）大小为4KB，每条（strip）含一个块；磁盘的平均寻道时间是4ms，旋转速度是7200 RPM（每分钟7200转），传输带宽是200MB/s，请计算：
1. 平均来说，从该RAID5阵列上读出一个条带（stripe）的时间是多少？
2. 当向该RAID5阵列中写入连续的两个4KB数据块时，平均来说，所需的时间是多少？请考虑这两个数据块属于同一个条带和不同条带的两种情况。

**解答**
1. 平均旋转延迟为 0.5(60/7200)=4.17ms
	读出一个条带时间为 4ms+4.17ms+4KB/200MB/s=8.19ms

2. 若两个数据块属于同一条带，所需时间 8.19×2=16.38ms
	若两个数据块属于不同条带，所需时间 8.19×4=32.76ms

>读一块时间=寻道时间+平均旋转时间+数据传输时间
>写一块时间=\[读数据块+读校验快\]+\[写数据块+写校验快\]
>![[Pasted image 20221224221743.png]]
>判断串行或并行的本质依据不是条带，而是磁盘。
>同一磁盘的数据块串行，不同磁盘的数据块并行。
>写一块时间=\[读数据块+读校验快\]+\[写数据块+写校验快\]
>数据块和校验块在不同磁盘，所以\[\]内可以并行。
>
>写一块时间=\[读数据块+读校验快\]+\[写数据块+写校验快\]=读一块时间的两倍
>注意，写时间并不是数据传输时间的两倍，而是读时间的两倍。
>因为在读出和写入间有校验计算，磁盘此时可能会做其他事，磁盘会将写当作一个新的请求，会重新寻道。